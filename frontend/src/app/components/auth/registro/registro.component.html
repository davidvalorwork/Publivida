

<div class="container text-center">

	<div class="card o-hidden border-0 shadow-lg my-1">
		<div class="card-body p-0">
			<div class="row">
				<div class="col-lg-5 d-none d-lg-block bg-login-image"></div>
				<div class="col-lg-7">
					<div class="p-5">
						<div class="text-center">
							<h1 class="h4 text-gray-900 mb-4">Crear Cuenta</h1>
						</div>
						<mat-slide-toggle (change)="empresaToggle()">Empresa</mat-slide-toggle>
						<form [formGroup]="form" class="mt-3" >
							<div class="form-group row text-center">
								<div class="col-12">
									<mat-form-field appearance="outline" style="width: 100%;">
										<mat-label>Nombre de Usuario</mat-label>
										<mat-icon matSuffix>account_circle</mat-icon>
										<input type="text" matInput
											formControlName="usuario" type="text" >
										<mat-error *ngIf="form.get('usuario').hasError('required') 
																&& form.get('usuario').dirty"
											class="error-form">Este campo es requerido</mat-error>
										<mat-error *ngIf="form.get('usuario').hasError('pattern') 
																&& form.get('usuario').dirty"
											class="error-form">El nombre es invalido</mat-error>
									</mat-form-field>
								</div>
								<div class="col-sm-6 mb-3 mb-sm-0">
									<mat-form-field appearance="outline" style="width: 100%;"  *ngIf="!empresa">
										<mat-label>Nombres</mat-label>
										<mat-icon matSuffix>account_circle</mat-icon>
										<input type="text" matInput
											formControlName="nombres" type="text" >
										<mat-error *ngIf="form.get('nombres').hasError('required') 
																&& form.get('nombres').dirty"
											class="error-form">Este campo es requerido</mat-error>
										<mat-error *ngIf="form.get('nombres').hasError('pattern') 
																&& form.get('nombres').dirty"
											class="error-form">El nombre es invalido</mat-error>
									</mat-form-field>

									<mat-form-field appearance="outline" style="width: 100%;"  *ngIf="empresa">
										<mat-label>Giro</mat-label>
										<mat-icon matSuffix>store</mat-icon>
										<input type="text" matInput
											formControlName="giro" type="text" >
										<mat-error *ngIf="form.get('giro').hasError('required') 
																&& form.get('giro').dirty"
											class="error-form">Este campo es requerido</mat-error>
										<mat-error *ngIf="form.get('giro').hasError('pattern') 
																&& form.get('giro').dirty"
											class="error-form">El nombre es invalido</mat-error>
									</mat-form-field>
								</div>
							
								<div class="col-sm-6">
									<mat-form-field appearance="outline" style="width: 100%;" *ngIf="!empresa">
										<mat-label>Apellidos</mat-label>
										<mat-icon matSuffix>account_circle</mat-icon>
										<input type="text" matInput
											formControlName="apellidos" type="text" >
										<mat-error *ngIf="form.get('apellidos').hasError('required') 
																&& form.get('apellidos').dirty"
											class="error-form">Este campo es requerido</mat-error>
											<mat-error *ngIf="form.get('apellidos').hasError('pattern') 
																&& form.get('apellidos').dirty"
											class="error-form">El nombre es invalido</mat-error>
									</mat-form-field>

									<mat-form-field appearance="outline" style="width: 100%;" *ngIf="empresa">
										<mat-label>Razón Social</mat-label>
										<mat-icon matSuffix>store</mat-icon>
										<input type="text" matInput
											formControlName="razon_social" type="text" >
										<mat-error *ngIf="form.get('razon_social').hasError('required') 
																&& form.get('razon_social').dirty"
											class="error-form">Este campo es requerido</mat-error>
											<mat-error *ngIf="form.get('razon_social').hasError('pattern') 
																&& form.get('razon_social').dirty"
											class="error-form">El nombre es invalido</mat-error>
									</mat-form-field>
								</div>
								<div class="col-12">
									<mat-form-field appearance="outline" style="width: 100%;">
										<mat-label>Rut</mat-label>
										<mat-icon matSuffix>account_circle</mat-icon>
										<input type="text" matInput
											formControlName="rut" type="text" >
										<mat-error *ngIf="form.get('rut').hasError('required') 
																&& form.get('rut').dirty"
											class="error-form">Este campo es requerido</mat-error>
										<mat-error *ngIf="form.get('rut').hasError('pattern') 
																&& form.get('rut').dirty"
											class="error-form">El nombre es invalido</mat-error>
									</mat-form-field>
								</div>
								<div class="col-12">
									<mat-form-field appearance="outline" style="width: 100%;" *ngIf="empresa">
										<mat-label>Nombre de fantasia</mat-label>
										<mat-icon matSuffix>storefront</mat-icon>
										<input type="text" matInput
											formControlName="nombre_fantasia" type="text" >
										<mat-error *ngIf="form.get('nombre_fantasia').hasError('required') 
																&& form.get('nombre_fantasia').dirty"
											class="error-form">Este campo es requerido</mat-error>
											<mat-error *ngIf="form.get('nombre_fantasia').hasError('pattern') 
																&& form.get('nombre_fantasia').dirty"
											class="error-form">El nombre es invalido</mat-error>
									</mat-form-field>
								</div>
								<div class="col-6">
									<mat-form-field appearance="outline" style="width: 100%;">
										<mat-label>Correo</mat-label>
										<mat-icon matSuffix>contact_mail</mat-icon>
										
										<input type="email" matInput
											formControlName="correo" type="text" >
										<mat-error *ngIf="form.get('correo').hasError('required') 
																&& form.get('correo').dirty"
											class="error-form">Este campo es requerido</mat-error>
										<mat-error *ngIf="form.get('correo').hasError('email') 
																&& form.get('correo').dirty"
											class="error-form">El correo es invalido</mat-error>
									</mat-form-field>
								</div>
								<div class="col-6">
									<mat-form-field appearance="outline" style="width: 100%;">
										<mat-label>Teléfono</mat-label>
										<mat-icon matSuffix>stay_current_portrait</mat-icon>
										<input type="email" matInput (keypress)="phoneInput($event)"
											formControlName="telefono" type="text" >
										<mat-error *ngIf="form.get('telefono').hasError('required') 
																&& form.get('telefono').dirty"
											class="error-form">Este campo es requerido</mat-error>
										<mat-error *ngIf="form.get('telefono').hasError('pattern') 
																&& form.get('telefono').dirty"
											class="error-form">El Teléfono no es valido</mat-error>
									</mat-form-field>
								</div>
							</div>
							<div class="form-group row">
								<div class="col-sm-6 mb-3 mb-sm-0">
									<mat-form-field appearance="outline" style="width: 100%;">
										<mat-label>Clave</mat-label>
										<input matInput [type]="hide ? 'password' : 'text'"
											formControlName="clave" type="password" >
											<button  type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Ocultar password'" [attr.aria-pressed]="hide">
												<mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
											</button>
										<mat-error *ngIf="form.get('clave').hasError('required') 
																&& form.get('clave').dirty"
											class="error-form">Este campo es requerido</mat-error>
										<mat-error *ngIf="form.get('clave').hasError('minlength') 
																&& form.get('clave').dirty"
											class="error-form">La clave debe contener minimo 8 caracteres</mat-error>
									</mat-form-field>
								</div>
								<div class="col-sm-6">
									<mat-form-field appearance="outline" style="width: 100%;">
										<mat-label>Repita la Clave</mat-label>
										<input  matInput [type]="hide ? 'password' : 'text'"
											formControlName="rclave">
											<button  type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Ocultar password'" [attr.aria-pressed]="hide">
												<mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
											</button>
										<mat-error *ngIf="form.get('rclave').hasError('required') 
																&& form.get('rclave').dirty"
											class="error-form">Este campo es requerido</mat-error>
									</mat-form-field>
								</div>
								<div class="col-12">
									<mat-select-country appearance="outline" country="Venezuela" itemsLoadSize="5"
									onCountrySelected="country(Country)">
									</mat-select-country>
								</div>
							</div>
							<button  class="btn btn-primary btn-user btn-block"
							[disabled]="form.status !== 'VALID' || submit === true "
							(click)="registrarUsuario(form.value)">
								Registar Cuenta
							</button>
						</form>
						<hr>
						<div class="text-center">
							<a class="small" [routerLink]="['/login']">¿Tienes una cuenta? Inicia Sesión!</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
